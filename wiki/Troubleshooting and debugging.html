<!DOCTYPE html>
<head>
	<title>Troubleshooting and debugging - SM64 Port</title>
	<link rel="icon" href="../favicon.ico">
	<meta property="og:title" content="SM64 Port Wiki" />
	<link rel="stylesheet" href="../style.css">
</head>

<body>
	<div style="display: flex;">
		<div id="wikilist">
			<!--List of wiki pages-->
			<img src="../img/wiki.png" onclick="window.location.href = 'https://sm64pcport.tk/wiki/';" style="width: 80px; cursor: url(../img/cursorpointer.png), auto;"></img><br><br>
			<a style="font-size: 120%;">Wiki pages:</a>
		</div>
		<div style="margin: 10px 15px;" id="mdtxt"></div>
	</div>
	<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
	<script>
document.getElementById('mdtxt').innerHTML = marked(`
## Troubleshooting
1. If you get 'make: gcc: command not found' although the packages did successfully install, you probably launched the wrong MSYS2. Read the instructions again. The terminal prompt should contain "MINGW32" or "MINGW64" in purple text, and **NOT** "MSYS".
2. If you get 'Failed to open baserom.us.z64!' you failed to place the baserom in the project folder. You can write 'ls' to list the files in the current working directory. If you are in the 'sm64-port' directory, make sure you see it here.
3. If you get 'make: *** No targets specified and no makefile found. Stop.', you are not in the correct directory. Make sure the yellow text in the terminal ends with 'sm64-port'. Use 'cd DIRECTORY' to enter the correct directory. If you write 'ls' you should see all the project files, including 'Makefile' if everything is correct.
4. If you get any error, be sure MSYS2 packages are up to date by executing 'pacman -Syu' and 'pacman -Su'.
5. When you execute 'gcc -v', be sure you see 'Target: i686-w64-mingw32' or 'Target: x86_64-w64-mingw32'. If you see 'Target: x86_64-pc-msys', you either opened the wrong MSYS start menu entry or installed the incorrect gcc package.
---
## Debugging
The code can be debugged using 'gdb'. 
On Linux install the 'gdb' package and execute 'gdb EXECUTABLE'. On MSYS2 install by executing 'pacman -S winpty gdb' and execute 'winpty gdb EXECUTABLE'. 
The 'winpty' program makes sure the keyboard works correctly in the terminal. Also consider changing the '-mwindows' compile flag to '-mconsole' to be able to see stdout/stderr as well as be able to press Ctrl+C to interrupt the program. 
In the Makefile, make sure you compile the sources using '-g' rather than '-O2' to include debugging symbols. See any online tutorial for how to use gdb.
`);
	</script>
	<script src="script.js"></script>
</body>